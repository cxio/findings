# 项目实现指引

除了 README.md 文件中的简单说明外，项目的设计文档主要存在于 `docs/` 文件夹中。

这是一个用于实际生产环境部署的程序，请按行业通用的编码规范来实现。


## 可配置性

程序应当有足够的用户可配置性，比如使用专门的配置文件（config.hjson）。

如果需要，程序还应当可以从命令行传递必要的参数。


## 编码约定

项目使用Go语言实现。

请尽量参考项目中已有的目录结构，但也可以根据需要，自行决定更细微的划分（包或模块）。

当前目录中已存在部分代码，应优先考虑复用，当然如果必要也可以提出修改。


## 安全性

由于P2P网络的节点间不需要相信对方，因此连接仅需要采用安全连接，避免第三方的窥探和分析即可。

这里采用自签名证书创建安全连接。证书在程序启动后自动创建，在当次运行期间有效（一次性使用）。证书的验证采用 SPKI 验算。


### SPKI 来源

节点会将自己证书的 SPKI 会发送给对方，对端会缓存该信息并向任何连入的节点提供分享。

之后，当其它节点连接本节点时，就可以用分享得到的 SPKI 验证本节点的自签名证书。


## 日志

应当支持独立的可配置的日志文件，必要时按日期分别储存。便于后期分析和归纳。


## 语言

代码中的注释请使用简体中文说明。与用户的交互（如果有）也请使用相同的语言。


## 使用的库

TCP 连接采用 Websocket, 使用 `github.com/gorilla/websocket` 库。

UDP 连接使用 QUIC 技术，库支持灵活考虑（比如 `github.com/quic-go/quic-go`）。
