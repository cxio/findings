# 节点发现服务（Findings）

一个P2P网络，提供各种P2P应用的同类（或异类）*节点发现*服务。

作为一个持续运行的公共P2P网络，它附带支持P2P所必须的基础服务：节点*NAT层级探测*和*UDP打洞协助*。

这个公共服务网络由区块链应用的币金奖励提供经济驱动力。

这可以避免P2P应用初始连接节点中心化的问题，为一个普遍强壮的P2P世界提供基础性支持。



## 用法

（待补充）



## 性能

（待补充）



## 附：网络的连通性

传统的P2P网络有一个致命的问题：初始连接的中心化需求。即初始上线节点需要获知其它已在线节点的信息，然后建立连接加入网络。

初始的在线节点信息通常由一些中心服务器提供，这些服务器会在App中硬编码配置。但这样的做法存在风险：App中配置的节点是明码，如果网络的主掌者要封禁它们，会很容易。这样对于该网域范围内的人来说，P2P并没有啥意义。

另外也有其它一些方法来获取初始的连接节点，比如通过专门的渠道。但实际上它们都可以被封堵。


### 暴力发现

Findings是一个P2P网络，组成网络的节点千千万，如果不考虑及时性，遍历全网IP的 **暴力发现** 可能是有效的，因为目标巨大。

用户可以用一台小设备挂机扫描……一旦成功探查到一个服务节点，就破解了任何封锁。

作为一种优化，历史IP可能是有用的，因为服务节点很可能切换到了它附近的IP。因此围绕历史IP的遍历测试可能更有效率。


#### 标准端口混入

如果Findings的默认端口被屏蔽，可以针对通用服务端口进行混入，比如 https 的 443。

探测包有着自己的格式，通用服务并不识别它们，往往只是简单的丢弃而已，无害。


#### 动态端口（含工作量）

另一种避免端口封锁的方法是**动态端口**策略。如果动态端口隐含了工作量，则被侦测屏蔽的风险会更小。

动态的端口是可预测的，但用户需要一定量的计算才能获知目标端口。设计良好的算法，使得每一台远端服务器的端口都变化各异，那么统一阻断就会很困难。而对于单一的客户端，它们的计算消耗是可接受的。这相当于用众多P2P节点的成本，抗衡统一封锁机器的算力。

> **算法参考：**
> 加入服务器自身的IP地址作为动态因素。
> 目标端口在一定的时间段（如1小时）内维持不变，以获得确定性。
