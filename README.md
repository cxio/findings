# 节点发现服务（Findings）

一个P2P网络，提供各种P2P应用的同类（或异类）节点的发现服务。

作为一个持续运行的公共P2P服务网络，它支持P2P所必须的基础服务：节点的*NAT层级探测*和*UDP打洞协助*。

这个公共服务由区块链应用的币金奖励提供经济驱动力。

这解决了P2P应用初始连接节点信息中心化的问题，可以成为一个P2P世界的基础设施。


## 功能

1. 节点间自我组网，维持动态的连接，形成一个P2P网络。
2. 接受应用节点的登记，包括任意节点（含NAT内网）的UDP连接信息，以及公网节点的TCP连接信息。
3. 提供任意节点对自身NAT层级，以及NAT生命周期的探测服务。
4. 提供应用节点的UDP打洞协助，以及对公网TCP服务节点的信息请求。



## 用法

运行一台本地Findings服务器，该服务器向Findings网络寻找节点创建连接。初始连接节点的信息可能内置于App配置中，如果失效则向Findings网络搜寻（暴力发现）。

应用客户端启动后，向该本地服务器请求其它Findings服务节点，然后申请NAT探测、获取应用TCP服务器、或UDP打洞协助。完成应用自身类型节点的连接和组网。


### 配置

```js
{
    user_id: "hello" ,      // 身份ID（非群组成员时任意）
    log_dir: "",            // 日志存放目录（全路径），默认应用程序缓存目录。可选
    server_port: 7788,      // 本地服务端口
    remote_port: 7788,      // 远端端口。可改为443用于混入服务器探测
    shortlist: 40,          // 候选池大小（节点数）
    applications: 500,      // 应用池大小（每种应用可同时连接的节点数）
    peers_help: 10,         // 上线协助发送条目数
    stun_peer_amount: 6,    // 打洞协助关联节点数
    peers_range: 200,       // 节点寻找的范围（基于起点的半径）
    buffer_size: 1024,      // 连接读写缓冲区大小
    stun_living: true,      // 是否启动 STUN:Live 服务（作为服务器）
    udp_listen: 7080,       // 本地 NAT 类型探测监听端口
    udp_living: 7181,       // 本地 NAT 生命期探测监听端口
    stun_client: true,      // 是否需要NAT层级&生存期探测
}
```


## 测试

（待补充）
